{"ast":null,"code":"import { ModelEnum } from '../../../model/enum/model.enum';\nimport { EDITION } from '../../../shared/services/wrapper.service';\nimport { Image } from '../../../model/image.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../game.service\";\nimport * as i2 from \"../../../shared/services/image.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../../../shared/services/deletion-handler.service\";\nimport * as i5 from \"../../../shared/services/wrapper.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i8 from \"../../../shared/pipes/string-enum.pipe\";\nfunction GameDetailComponent_span_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\")(1, \"span\", 23);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const category_r8 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(category_r8.title);\n  }\n}\nfunction GameDetailComponent_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\")(1, \"span\", 23);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const mechanism_r9 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(mechanism_r9.title);\n  }\n}\nfunction GameDetailComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"h4\");\n    i0.ɵɵtext(2, \"Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.game.description);\n  }\n}\nfunction GameDetailComponent_h5_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h5\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r3.game.playTime);\n  }\n}\nfunction GameDetailComponent_h5_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h5\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r4.limitAge);\n  }\n}\nfunction GameDetailComponent_ng_container_29_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"enumToString\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const creator_r11 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\"\", i0.ɵɵpipeBind1(3, 3, creator_r11.role), \" : \", creator_r11.firstName, \" \", creator_r11.lastName, \"\");\n  }\n}\nfunction GameDetailComponent_ng_container_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"h4\", 3);\n    i0.ɵɵtext(2, \"Cr\\u00E9ateurs\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, GameDetailComponent_ng_container_29_div_3_Template, 4, 5, \"div\", 4);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r5.game.creators);\n  }\n}\nfunction GameDetailComponent_ngb_carousel_34_1_ng_template_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵelement(1, \"img\", 26);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext();\n    const image_r13 = ctx_r16.$implicit;\n    const i_r14 = ctx_r16.index;\n    const ctx_r15 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", image_r13.content, i0.ɵɵsanitizeUrl);\n    i0.ɵɵpropertyInterpolate2(\"alt\", \"\", ctx_r15.game.title, \" - dataUriArray[\", i_r14, \"]\");\n  }\n}\nfunction GameDetailComponent_ngb_carousel_34_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, GameDetailComponent_ngb_carousel_34_1_ng_template_0_Template, 2, 3, \"ng-template\", 24);\n  }\n}\nfunction GameDetailComponent_ngb_carousel_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ngb-carousel\");\n    i0.ɵɵtemplate(1, GameDetailComponent_ngb_carousel_34_1_Template, 1, 0, null, 4);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r6.images);\n  }\n}\nfunction GameDetailComponent_div_59_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"h4\");\n    i0.ɵɵtext(2, \"But du jeu\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r17 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r17.game.goal);\n  }\n}\nfunction GameDetailComponent_div_59_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"h4\");\n    i0.ɵɵtext(2, \"R\\u00E8gles\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r18 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r18.game.rules);\n  }\n}\nfunction GameDetailComponent_div_59_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"h4\");\n    i0.ɵɵtext(2, \"Variantes\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r19 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r19.game.variant);\n  }\n}\nfunction GameDetailComponent_div_59_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 15);\n    i0.ɵɵelement(2, \"hr\");\n    i0.ɵɵtemplate(3, GameDetailComponent_div_59_div_3_Template, 5, 1, \"div\", 5);\n    i0.ɵɵtemplate(4, GameDetailComponent_div_59_div_4_Template, 5, 1, \"div\", 5);\n    i0.ɵɵtemplate(5, GameDetailComponent_div_59_div_5_Template, 5, 1, \"div\", 5);\n    i0.ɵɵelement(6, \"span\", 27);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r7.game.goal);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r7.game.rules);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r7.game.variant);\n  }\n}\nexport let GameDetailComponent = /*#__PURE__*/(() => {\n  class GameDetailComponent {\n    constructor(service, imageService, route, router, deletionHandlerService, wrapperService) {\n      this.service = service;\n      this.imageService = imageService;\n      this.route = route;\n      this.router = router;\n      this.deletionHandlerService = deletionHandlerService;\n      this.wrapperService = wrapperService;\n      this.images = [];\n    }\n    ngOnInit() {\n      this.game = this.service.getDetailedGame();\n      this.numberOfPlayers = this.service.buildPLayers(this.game.minNumberOfPlayer, this.game.maxNumberOfPlayer);\n      this.limitAge = this.service.buildAge(this.game.minAge, this.game.maxAge, this.game.minMonth);\n      if (this.game.imageIds && this.game.imageIds.length > 0) {\n        this.loadAllImages();\n      }\n      this.areRulesDisplayed = false;\n    }\n    onBack() {\n      this.router.navigate(['/admin/editor/games/list/', this.game.id]);\n    }\n    onDelete() {\n      this.service.deleteThenFetchAll(this.game.id);\n      this.router.navigate(['/admin/editor/games/list']);\n    }\n    onOpenConfirm() {\n      this.deletionHandlerService.callModal(ModelEnum.GAME, this.game, false).then(value => {\n        if (value === 'Ok click') {\n          this.onDelete();\n        }\n      }).catch(err => console.log(err));\n    }\n    loadAllImages() {\n      this.game.imageIds.forEach(id => {\n        this.imageService.fetchImage(id).subscribe(imageData => {\n          const i = new Image();\n          i.id = imageData.id;\n          i.content = 'data:image/png;base64,' + imageData.content;\n          this.images.push(i);\n        });\n      });\n    }\n    toggleRuleDisplay() {\n      this.areRulesDisplayed = !this.areRulesDisplayed;\n    }\n    onEdit() {\n      this.wrapperService.entity = 'Jeux';\n      this.wrapperService.mode = EDITION;\n      this.router.navigate(['admin/locked-mode/games/' + this.game.id + '/edit']);\n    }\n  }\n  GameDetailComponent.ɵfac = function GameDetailComponent_Factory(t) {\n    return new (t || GameDetailComponent)(i0.ɵɵdirectiveInject(i1.GameService), i0.ɵɵdirectiveInject(i2.ImageService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.DeletionHandlerService), i0.ɵɵdirectiveInject(i5.WrapperService));\n  };\n  GameDetailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: GameDetailComponent,\n    selectors: [[\"app-game-detail\"]],\n    decls: 60,\n    vars: 16,\n    consts: [[1, \"row\"], [1, \"col-md-8\"], [1, \"text-primary\"], [1, \"mt-5\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"mt-5\", 4, \"ngIf\"], [1, \"col-md-4\"], [1, \"float-right\", \"mb-5\"], [\"type\", \"button\", 1, \"btn\", \"btn-warning\", \"m-2\", 3, \"click\"], [\"src\", \"../../../../assets/icons/arrow-left.svg\", \"alt\", \"X-square\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", \"m-2\", 3, \"click\"], [1, \"card\", 2, \"width\", \"18rem\"], [1, \"card-body\"], [4, \"ngIf\"], [1, \"row\", \"mt-5\"], [1, \"col-md-12\"], [1, \"mb-2\"], [1, \"col-lg-6\"], [\"type\", \"button\", 1, \"btn\", \"btn-warning\", \"mt-5\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", \"mt-5\", \"ml-3\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-danger\", \"mt-5\", \"ml-3\", 3, \"click\"], [1, \"row\", \"mt-5\", \"mb-5\"], [2, \"cursor\", \"pointer\", 3, \"click\"], [1, \"badge-secondary\", \"badge\", \"mr-2\"], [\"ngbSlide\", \"\"], [1, \"text-center\"], [1, \"img-fluid\", \"carousel-img\", \"m-4\", 3, \"src\", \"alt\"], [1, \"mb-5\"]],\n    template: function GameDetailComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\");\n        i0.ɵɵtext(3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 2);\n        i0.ɵɵtext(5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"h4\", 3);\n        i0.ɵɵtext(7, \"Cat\\u00E9gories\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(8, GameDetailComponent_span_8_Template, 3, 1, \"span\", 4);\n        i0.ɵɵelementStart(9, \"h4\", 3);\n        i0.ɵɵtext(10, \"M\\u00E9canismes\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(11, GameDetailComponent_span_11_Template, 3, 1, \"span\", 4);\n        i0.ɵɵtemplate(12, GameDetailComponent_div_12_Template, 5, 1, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 6)(14, \"div\", 7)(15, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function GameDetailComponent_Template_button_click_15_listener() {\n          return ctx.onBack();\n        });\n        i0.ɵɵelement(16, \"img\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"button\", 10);\n        i0.ɵɵlistener(\"click\", function GameDetailComponent_Template_button_click_17_listener() {\n          return ctx.onEdit();\n        });\n        i0.ɵɵtext(18, \"Mode \\u00E9dition \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(19, \"div\", 11)(20, \"div\", 12)(21, \"h5\");\n        i0.ɵɵtext(22);\n        i0.ɵɵpipe(23, \"enumToString\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"h5\");\n        i0.ɵɵtext(25);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(26, GameDetailComponent_h5_26_Template, 2, 1, \"h5\", 13);\n        i0.ɵɵtemplate(27, GameDetailComponent_h5_27_Template, 2, 1, \"h5\", 13);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(28, \"div\", 3);\n        i0.ɵɵtemplate(29, GameDetailComponent_ng_container_29_Template, 4, 1, \"ng-container\", 13);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(30, \"div\", 14)(31, \"div\", 15)(32, \"h4\", 16);\n        i0.ɵɵtext(33, \"Galerie\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(34, GameDetailComponent_ngb_carousel_34_Template, 2, 1, \"ngb-carousel\", 13);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(35, \"div\", 0)(36, \"div\", 15)(37, \"h4\", 3);\n        i0.ɵɵtext(38, \"Taille / encombrement\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"div\");\n        i0.ɵɵtext(40);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(41, \"h4\", 3);\n        i0.ɵɵtext(42, \"Materiel\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(43, \"div\");\n        i0.ɵɵtext(44);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(45, \"div\", 0);\n        i0.ɵɵelement(46, \"div\", 17);\n        i0.ɵɵelementStart(47, \"div\", 17)(48, \"button\", 18);\n        i0.ɵɵlistener(\"click\", function GameDetailComponent_Template_button_click_48_listener() {\n          return ctx.onBack();\n        });\n        i0.ɵɵtext(49, \"Retour aux jeux \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(50, \"button\", 19);\n        i0.ɵɵlistener(\"click\", function GameDetailComponent_Template_button_click_50_listener() {\n          return ctx.onEdit();\n        });\n        i0.ɵɵtext(51, \"Mode \\u00E9dition \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(52, \"button\", 20);\n        i0.ɵɵlistener(\"click\", function GameDetailComponent_Template_button_click_52_listener() {\n          return ctx.onBack();\n        });\n        i0.ɵɵtext(53, \"Supprimer le jeu \");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(54, \"div\", 21)(55, \"div\", 15)(56, \"h4\", 2)(57, \"span\", 22);\n        i0.ɵɵlistener(\"click\", function GameDetailComponent_Template_span_click_57_listener() {\n          return ctx.toggleRuleDisplay();\n        });\n        i0.ɵɵtext(58, \" Afficher / masquer les r\\u00E8gles\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵtemplate(59, GameDetailComponent_div_59_Template, 7, 3, \"div\", 13);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.game.title);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"\", ctx.game.copies ? ctx.game.copies.length : 0, \" exemplaire(s)\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.game.categories);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.game.mechanisms);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.game.description);\n        i0.ɵɵadvance(10);\n        i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(23, 14, ctx.game.nature), \"\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.numberOfPlayers);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.game.playTime);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.limitAge.length > 0);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.game.creators);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.game.imageIds && ctx.game.imageIds.length > 0);\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(ctx.game.size);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.game.material);\n        i0.ɵɵadvance(15);\n        i0.ɵɵproperty(\"ngIf\", ctx.areRulesDisplayed);\n      }\n    },\n    dependencies: [i6.NgForOf, i6.NgIf, i7.NgbCarousel, i7.NgbSlide, i8.StringEnumPipe],\n    styles: [\"ngb-carousel[_ngcontent-%COMP%]{background:darkgrey;border-radius:15px;margin:0 auto}.carousel-img[_ngcontent-%COMP%]{height:42vh;border-radius:5px}\"]\n  });\n  return GameDetailComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}